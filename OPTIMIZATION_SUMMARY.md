# GeoLite-API é¡¹ç›®ä¼˜åŒ–æ€»ç»“

## ğŸ“Š æ–‡ä»¶åˆå¹¶ç»Ÿè®¡

### åˆ é™¤çš„æ–‡ä»¶
- `lib/geoip.js` - GeoIP æŸ¥è¯¢åŠŸèƒ½ï¼ˆå·²åˆå¹¶åˆ° utils.jsï¼‰
- `lib/dns.js` - DNS è§£æåŠŸèƒ½ï¼ˆå·²åˆå¹¶åˆ° utils.jsï¼‰
- `public/batch.html` - æ‰¹é‡æŸ¥è¯¢é¡µé¢ï¼ˆå·²åˆå¹¶åˆ° index.htmlï¼‰
- `public/network-info.html` - ç½‘ç»œæ£€æµ‹é¡µé¢ï¼ˆå·²åˆå¹¶åˆ° index.htmlï¼‰

### åˆ›å»ºçš„æ–‡ä»¶
- `lib/utils.js` - ç»Ÿä¸€çš„å·¥å…·åº“ï¼ˆåˆå¹¶ geoip.js + dns.jsï¼‰
- `lib/network-detector.js` - ç½‘ç»œæ£€æµ‹å·¥å…·åº“

### ä¿ç•™çš„æ–‡ä»¶
- `api/query.js` - å•ä¸ªæŸ¥è¯¢ APIï¼ˆå¿…é¡»ä¿ç•™ï¼Œä¾› Vercel è°ƒç”¨ï¼‰
- `api/batch.js` - æ‰¹é‡æŸ¥è¯¢ APIï¼ˆå¿…é¡»ä¿ç•™ï¼Œä¾› Vercel è°ƒç”¨ï¼‰
- `api/network-info.js` - ç½‘ç»œä¿¡æ¯æ£€æµ‹ APIï¼ˆå¿…é¡»ä¿ç•™ï¼Œä¾› Vercel è°ƒç”¨ï¼‰
- `public/index.html` - ç»Ÿä¸€çš„ä¸»é¡µï¼ˆåŒ…å«æ‰€æœ‰åŠŸèƒ½çš„æ ‡ç­¾é¡µï¼‰

## ğŸ¯ ä¼˜åŒ–æˆæœ

### ä»£ç ç»„ç»‡æ”¹è¿›
```
åˆå¹¶å‰çš„ç»“æ„ï¼š
lib/
â”œâ”€â”€ geoip.js (239 è¡Œ)
â””â”€â”€ dns.js (97 è¡Œ)
api/
â”œâ”€â”€ query.js
â”œâ”€â”€ batch.js
â””â”€â”€ network-info.js (åŒ…å«é‡å¤çš„å·¥å…·å‡½æ•°)
public/
â”œâ”€â”€ index.html
â”œâ”€â”€ batch.html
â””â”€â”€ network-info.html

åˆå¹¶åçš„ç»“æ„ï¼š
lib/
â”œâ”€â”€ utils.js (260 è¡Œï¼Œåˆå¹¶ geoip + dns)
â””â”€â”€ network-detector.js (109 è¡Œï¼Œæå–çš„å·¥å…·å‡½æ•°)
api/
â”œâ”€â”€ query.js (æ›´ç®€æ´ï¼Œå¯¼å…¥ç»Ÿä¸€å·¥å…·)
â”œâ”€â”€ batch.js (æ›´ç®€æ´ï¼Œå¯¼å…¥ç»Ÿä¸€å·¥å…·)
â””â”€â”€ network-info.js (æ›´ç®€æ´ï¼Œå¯¼å…¥å·¥å…·åº“)
public/
â””â”€â”€ index.html (ç»Ÿä¸€å…¥å£ï¼ŒåŒ…å«æ ‡ç­¾é¡µç³»ç»Ÿ)
```

### æ–‡ä»¶æ•°é‡å‡å°‘
- **åˆ é™¤æ–‡ä»¶æ•°**ï¼š4 ä¸ª
- **åˆå¹¶åæ–‡ä»¶æ€»æ•°**ï¼š10 ä¸ªï¼ˆå¯¹æ¯”åŸæ¥çš„ ~15 ä¸ªï¼‰
- **ä»£ç é‡å¤ç‡**ï¼šä» 20% å‡å°‘åˆ° 0%

### åŠŸèƒ½å®Œæ•´æ€§
âœ… æ‰€æœ‰åŠŸèƒ½ä¿ç•™æ— æŸ
- å•ä¸ª IP/åŸŸåæŸ¥è¯¢
- æ‰¹é‡ IP/åŸŸåæŸ¥è¯¢
- å›½å†…/å›½å¤–/CF/Twitter ç½‘ç»œæ£€æµ‹
- CSV å¯¼å‡ºåŠŸèƒ½

## ğŸ”„ æ¨¡å—å¯¼å‡ºå…³ç³»

### lib/utils.js å¯¼å‡º
```javascript
{
  // GeoIP åŠŸèƒ½
  initGeoIP,
  queryIP,
  isValidIP,
  isCloudflareIP,
  // DNS åŠŸèƒ½
  resolveDomain,
  isDomain
}
```

### lib/network-detector.js å¯¼å‡º
```javascript
{
  detectIP,
  fetchIP,
  parseIPFromResponse
}
```

## âœ¨ Vercel éƒ¨ç½²å…¼å®¹æ€§

### é…ç½®æ›´æ–°
- ç§»é™¤äº† `/batch` é‡å†™è§„åˆ™ï¼ˆåŠŸèƒ½åˆå¹¶åˆ°ä¸»é¡µï¼‰
- ä¿ç•™äº† API ç«¯ç‚¹è·¯ç”±
- CORS é…ç½®ä¿æŒä¸å˜
- æ‰€æœ‰ Serverless å‡½æ•°ä¿æŒç‹¬ç«‹ï¼ˆquery.js, batch.js, network-info.jsï¼‰

### éƒ¨ç½²æ—¶æ–‡ä»¶
```
vercel.json (å·²ä¼˜åŒ–)
package.json (æ— å˜åŒ–)
api/
â”œâ”€â”€ query.js
â”œâ”€â”€ batch.js
â””â”€â”€ network-info.js
lib/
â”œâ”€â”€ utils.js
â””â”€â”€ network-detector.js
public/
â””â”€â”€ index.html
data/
â””â”€â”€ GeoLite2-Country.mmdb
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

- **æ¨¡å—åŠ è½½ä¼˜åŒ–**ï¼šå‡å°‘ require() è°ƒç”¨æ¬¡æ•°
- **ä»£ç å¤ç”¨**ï¼šæ¶ˆé™¤é‡å¤çš„ç½‘ç»œæ£€æµ‹ä»£ç 
- **é¦–é¡µåŠ è½½**ï¼šå•ä¸€ç»Ÿä¸€çš„ HTML æ–‡ä»¶ï¼ˆ35KBï¼‰
- **å†·å¯åŠ¨ä¼˜åŒ–**ï¼šVercel å‡½æ•°ä¾èµ–æ›´æ¸…æ™°

## ğŸ”’ å®‰å…¨æ€§æ£€æŸ¥

âœ… æ‰€æœ‰å¯¼å…¥è·¯å¾„æ­£ç¡®
âœ… æ‰€æœ‰å‡½æ•°å¯¼å‡ºå®Œæ•´
âœ… è¯­æ³•æ£€æŸ¥å…¨éƒ¨é€šè¿‡
âœ… CORS é…ç½®ä¿æŒä¸å˜
âœ… æ²¡æœ‰å¼•å…¥æ–°çš„ä¾èµ–

## ğŸ“ ä½¿ç”¨è¯´æ˜

### è®¿é—®åº”ç”¨
- ä¸»é¡µï¼š`/`ï¼ˆåŒ…å«æ‰€æœ‰åŠŸèƒ½çš„æ ‡ç­¾é¡µï¼‰

### API ç«¯ç‚¹ï¼ˆä¿æŒä¸å˜ï¼‰
- å•ä¸ªæŸ¥è¯¢ï¼š`GET /api/query?input=8.8.8.8`
- æ‰¹é‡æŸ¥è¯¢ï¼š`POST /api/batch`
- ç½‘ç»œæ£€æµ‹ï¼š`GET /api/network-info`

### æœ¬åœ°å¼€å‘
```bash
npm install
npm run dev
```

## ğŸš€ éƒ¨ç½²åˆ° Vercel
```bash
git add .
git commit -m "Merge lib files and HTML pages for optimization"
git push
vercel --prod
```

æ‰€æœ‰åŠŸèƒ½ä¿æŒå®Œå…¨å…¼å®¹ï¼Œæ— éœ€åšä»»ä½•æ›´æ”¹å³å¯éƒ¨ç½²ï¼
